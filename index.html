<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Presentación de Negocio: Ama de Llaves</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #0d1117;
            color: #e6edf3;
        }

        body.presentation-mode {
             overflow: hidden; /* Hide scrollbars for presentation feel */
        }
        
        .background-gradient {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            opacity: 0;
            transition: opacity 1.5s ease-in-out;
            background-size: 200% 200%;
        }
        
        #background-gradient-1 {
            background-image: radial-gradient(circle at 10% 20%, rgba(59, 130, 246, 0.1), transparent 40%),
                              radial-gradient(circle at 80% 90%, rgba(139, 92, 246, 0.1), transparent 40%);
            animation: pan-1 30s ease-in-out infinite alternate;
        }

        #background-gradient-2 {
            background-image: radial-gradient(circle at 90% 10%, rgba(34, 211, 238, 0.1), transparent 40%),
                              radial-gradient(circle at 20% 80%, rgba(59, 130, 246, 0.12), transparent 40%);
            animation: pan-2 30s ease-in-out infinite alternate;
        }

        #background-gradient-3 {
            background-image: radial-gradient(circle at 50% 90%, rgba(129, 140, 248, 0.1), transparent 40%),
                              radial-gradient(circle at 40% 10%, rgba(74, 222, 128, 0.08), transparent 40%);
            animation: pan-3 30s ease-in-out infinite alternate;
        }


        @keyframes pan-1 {
            from { background-position: 0% 0%; }
            to { background-position: 100% 100%; }
        }
        @keyframes pan-2 {
            from { background-position: 100% 0%; }
            to { background-position: 0% 100%; }
        }
         @keyframes pan-3 {
            from { background-position: 50% 100%; }
            to { background-position: 50% 0%; }
        }


        .main-title {
            color: rgb(59, 130, 246);
        }
        .kpi-card {
            background-color: rgba(31, 41, 55, 0.5);
            backdrop-filter: blur(10px);
            border-radius: 0.75rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: transform 0.2s ease-in-out, background-color 0.2s;
        }
        .kpi-card:hover {
            transform: translateY(-5px);
            background-color: rgba(55, 65, 81, 0.5);
        }
        .kpi-value {
            color: rgb(59, 130, 246);
        }
        .chart-card {
            background-color: rgba(17, 24, 39, 0.7);
            backdrop-filter: blur(12px);
            padding: 1.5rem; /* Reduced padding for mobile */
            border-radius: 1rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .chart-title {
            color: #c9d1d9;
            font-weight: 500;
            margin-bottom: 1rem;
            text-align: center;
            font-size: 1rem; /* Adjusted for mobile */
        }
            .slide {
              display: flex;
              flex-direction: column;
              align-items: center;  /* ✅ Centra horizontalmente el contenido */
              justify-content: center; /* ✅ Centra verticalmente */
              min-height: 100vh;
              width: 100vw;
              position: absolute;
              top: 0;
              left: 0;
              opacity: 0;
              visibility: hidden;
              transition: opacity 0.7s ease-in-out, visibility 0.7s;
              z-index: 10;
              padding: 1rem;
            }
            
            .slide.active {
              opacity: 1;
              visibility: visible;
            }
            
            .impact-text {
              color: #f0f6fc;
              font-size: 1.5rem;
              line-height: 2rem;
              font-weight: 700;
              text-align: center;  /* ✅ Centra el texto */
              margin: 0 auto 2rem auto; /* ✅ Centra el bloque */
              max-width: 90%;
            }
            
            .impact-text span {
              display: inline-block;
              width: 100%;  /* ✅ Asegura que el span también se centre */
              text-align: center;
            }

        .chart-container-slide {
            width: 100%;
            max-width: 900px;
        }

        /* Animation styles */
        .animated-module {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 0.8s ease-out, transform 0.8s ease-out;
        }
        .active .animated-module {
            opacity: 1;
            transform: translateY(0);
        }
        .active .delay-1 {
            transition-delay: 0.25s;
        }
        .active .delay-2 {
            transition-delay: 0.5s;
        }
        .active .delay-3 {
            transition-delay: 0.75s;
        }

        /* App Store & Google Play Button Styles */
        .app-store-button, .storeLink {
            display: inline-block;
            transition: transform 0.2s ease-in-out;
        }
        .app-store-button:hover, .storeLink:hover {
            transform: scale(1.05);
        }
        .app-store-button img, .storeLink img {
            height: 50px; /* Consistent height */
            width: auto;
        }


        /* Desktop specific styles */
        @media (min-width: 768px) {
            .chart-title {
                font-size: 1.125rem;
            }
            .impact-text {
                font-size: 2.25rem;
                line-height: 2.75rem;
            }
             .chart-card {
                padding: 2rem;
            }
             .app-store-button img, .storeLink img {
                height: 58px; /* Consistent height for desktop */
            }
        }
    </style>
</head>
<body class="relative presentation-mode">
    
    <div id="background-gradient-1" class="background-gradient"></div>
    <div id="background-gradient-2" class="background-gradient"></div>
    <div id="background-gradient-3" class="background-gradient"></div>


    <div id="presentation-container">
        <!-- Slide 0: Concept -->
        <div id="slide-0" class="slide active">
            <div class="text-center p-4 max-w-4xl">
                <h1 class="text-5xl md:text-6xl font-bold text-slate-100 animated-module">Ama de Llaves.</h1>
                <div class="mt-8 text-slate-300 text-lg md:text-xl space-y-6">
                    <p class="animated-module delay-1">1. Guardiana del santuario del hogar; profesional que cultiva la armonía, el orden y la tranquilidad en los espacios más íntimos.</p>
                    <p class="animated-module delay-2">2. Persona cuyo servicio experto y de confianza transforma una casa en un verdadero hogar.</p>
                </div>
                 <div class="mt-12 animated-module delay-3">
                     <button onclick="nextSlide()" class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-8 rounded-full transition-all transform hover:scale-105 text-lg">
                        Comenzar
                    </button>
                </div>
            </div>
        </div>

      <!-- Slide 1: Misión -->
<div id="slide-1" class="slide">
  <div class="max-w-4xl text-center">
    <h2 class="impact-text animated-module text-center">
      <span class="text-blue-500">Nuestra Misión.</span>
    </h2>
    <p class="text-slate-300 text-xl max-w-3xl mx-auto animated-module delay-1">
      Redefinir el estándar de excelencia y confianza en el cuidado del hogar, empoderando a una nueva generación de mujeres profesionales.
    </p>
  </div>
</div>

<!-- Slide 2: Visión -->
<div id="slide-2" class="slide">
  <div class="max-w-4xl text-center">
    <h2 class="impact-text animated-module text-center">
      <span class="text-blue-500">Nuestra Visión.</span>
    </h2>
    <p class="text-slate-300 text-xl max-w-3xl mx-auto animated-module delay-1">
      Convertirnos en el sello de confianza indispensable para los hogares en la península de Yucatán.
    </p>
  </div>
</div>

<!-- Slide 3: Valores -->
<div id="slide-3" class="slide">
  <div class="max-w-4xl text-center">
    <h2 class="impact-text animated-module text-center">
      <span class="text-blue-500">Nuestros Valores.</span>
    </h2>
    <p class="text-slate-300 text-xl max-w-3xl mx-auto animated-module delay-1">
      La Confianza es la Llave. La Dignidad es Autoridad. La Excelencia es el Mínimo. La Discreción es Respeto.
    </p>
  </div>
</div>
        <!-- Slide 4: How we change the market -->
        <div id="slide-4" class="slide">
             <p class="impact-text animated-module">El mercado está listo para evolucionar.<br>Presentamos la <span class="text-blue-500">primera plataforma digital</span> para el cuidado del hogar en la Península de Yucatán.</p>
             <p class="text-slate-300 text-xl max-w-3xl text-center animated-module delay-1">Reemplazamos la informalidad con certificación, la inconsistencia con tecnología y la incertidumbre con total confianza.</p>
        </div>

        <!-- Slide 5: Methodology -->
        <div id="slide-5" class="slide">
            <p class="impact-text animated-module">Así que decidimos preguntar. <br><span class="text-blue-500">Escuchamos al mercado.</span></p>
            <p class="text-slate-300 text-xl max-w-3xl text-center animated-module delay-1">Realizamos una encuesta a 238 clientes potenciales en Mérida y Campeche para entender sus verdaderas necesidades y validar nuestra hipótesis.</p>
        </div>

        <!-- Slide 6: The Core Problem -->
        <div id="slide-6" class="slide">
            <p class="impact-text animated-module">Esto es lo que descubrimos. <br>El problema no es la limpieza. Es la <span class="text-blue-500">incertidumbre.</span></p>
            <div class="chart-container-slide animated-module delay-1">
                 <div class="chart-card xl:col-span-2 h-[36rem]">
                    <h2 class="chart-title">Principal Preocupación al Contratar</h2>
                    <canvas id="preocupacionChart_slide"></canvas>
                </div>
            </div>
        </div>
        
        <!-- Slide 7: The Core Value -->
        <div id="slide-7" class="slide">
            <p class="impact-text animated-module">Cuando la incertidumbre es el problema, <br>la <span class="text-blue-500">seguridad</span> se vuelve el activo más valioso.</p>
            <div class="chart-container-slide animated-module delay-1">
                <div class="chart-card xl:col-span-3 h-[36rem]">
                    <h2 class="chart-title">Factores Clave en la Decisión</h2>
                    <canvas id="factoresChart_slide"></canvas>
                </div>
            </div>
        </div>
        
        <!-- Slide 8: Validating the Solution -->
        <div id="slide-8" class="slide">
             <p class="impact-text animated-module">La confianza no se improvisa. <br>Se <span class="text-blue-500">certifica.</span></p>
            <div class="chart-container-slide animated-module delay-1">
                 <div class="chart-card xl:col-span-2 h-[36rem]">
                    <h2 class="chart-title">Importancia de la Certificación del Profesional</h2>
                    <canvas id="certificacionChart_slide"></canvas>
                </div>
            </div>
        </div>

        <!-- Slide 9: Market Response -->
        <div id="slide-9" class="slide">
            <p class="impact-text animated-module">Y cuando se garantiza la confianza, <br>el mercado <span class="text-blue-500">responde.</span></p>
            <div class="chart-container-slide animated-module delay-1">
                 <div class="chart-card xl:col-span-2 h-[36rem]">
                    <h2 class="chart-title">Probabilidad de Uso del Servicio</h2>
                    <canvas id="probabilidadChart_slide"></canvas>
                </div>
            </div>
        </div>
        
        <!-- Slide 10: The Value -->
        <div id="slide-10" class="slide">
            <p class="impact-text animated-module">El valor de la tranquilidad. <br>Reflejado en los <span class="text-blue-500">datos.</span></p>
            <div class="chart-container-slide animated-module delay-1">
                 <div class="chart-card xl:col-span-2 h-[36rem]">
                    <h2 class="chart-title">Disposición a Pagar por Hora (MXN)</h2>
                    <canvas id="pagoChart_slide"></canvas>
                </div>
            </div>
        </div>
        
        <!-- Slide 11: The Customer -->
        <div id="slide-11" class="slide">
             <p class="impact-text animated-module">Conoce a nuestro cliente. <br>Para quienes su <span class="text-blue-500">tiempo</span> es el activo más valioso.</p>
            <div class="chart-container-slide grid md:grid-cols-2 gap-6">
                 <div class="chart-card h-[32rem] animated-module delay-1">
                    <h2 class="chart-title">Rango de Edad</h2>
                    <canvas id="edadChart_slide"></canvas>
                </div>
                <div class="chart-card h-[32rem] animated-module delay-1" style="transition-delay: 0.4s;">
                    <h2 class="chart-title">Ingreso Mensual del Hogar</h2>
                    <canvas id="ingresoChart_slide"></canvas>
                </div>
            </div>
        </div>
        
        <!-- Slide 12: SWOT -->
        <div id="slide-12" class="slide">
             <p class="impact-text animated-module">Nuestro Panorama <span class="text-blue-500">Estratégico.</span></p>
             <div class="grid grid-cols-2 gap-6 max-w-4xl w-full text-slate-300 animated-module delay-1">
                <div class="p-4 border border-slate-700 rounded-lg">
                    <h3 class="font-bold text-lg text-green-400 mb-2">Fortalezas</h3>
                    <ul class="list-disc list-inside text-sm space-y-1">
                        <li>Marca y concepto diferenciados</li>
                        <li>Modelo de certificación como barrera de entrada</li>
                        <li>Mercado dispuesto a pagar precios premium</li>
                    </ul>
                </div>
                 <div class="p-4 border border-slate-700 rounded-lg">
                    <h3 class="font-bold text-lg text-blue-400 mb-2">Oportunidades</h3>
                    <ul class="list-disc list-inside text-sm space-y-1">
                        <li>Crecimiento de +300% en demanda digital</li>
                        <li>74.8% del mercado disponible para captar</li>
                        <li>Preferencia por canales digitales (App/WhatsApp)</li>
                    </ul>
                </div>
                 <div class="p-4 border border-slate-700 rounded-lg">
                    <h3 class="font-bold text-lg text-yellow-400 mb-2">Debilidades</h3>
                    <ul class="list-disc list-inside text-sm space-y-1">
                        <li>Marca nueva sin reconocimiento</li>
                        <li>Alta inversión inicial requerida</li>
                        <li>Proceso de reclutamiento intensivo</li>
                    </ul>
                </div>
                 <div class="p-4 border border-slate-700 rounded-lg">
                    <h3 class="font-bold text-lg text-red-400 mb-2">Amenazas</h3>
                    <ul class="list-disc list-inside text-sm space-y-1">
                        <li>Fuerte competencia informal</li>
                        <li>Plataformas nacionales establecidas</li>
                        <li>Sensibilidad al precio en ciertos segmentos</li>
                    </ul>
                </div>
             </div>
        </div>

        <!-- Slide 13: The Future -->
        <div id="slide-13" class="slide">
            <div class="text-center">
                <p class="text-slate-400 text-2xl font-light animated-module">Y esto es solo el comienzo.</p>
                <h2 class="text-4xl md:text-5xl font-bold text-slate-100 mt-4 animated-module delay-1">Próximamente.</h2>
                <div class="flex flex-col sm:flex-row justify-center items-center gap-6 mt-10 animated-module delay-2">
                    <!-- App Store Button -->
                    <a href="https://apps.apple.com/app/idYOUR_APP_ID" target="_blank" rel="noopener noreferrer" class="app-store-button">
                        <img src="https://developer.apple.com/assets/elements/badges/download-on-the-app-store.svg" alt="Download on the App Store" />
                    </a>
                    <!-- Google Play Button -->
                    <a href="https://play.google.com/store/apps/details?id=your.app.id" class="storeLink" target="_blank" rel="noopener noreferrer">
                         <img alt="Get it on Google Play" src="https://play.google.com/intl/en_us/badges/images/generic/en_badge_web_generic.png" />
                    </a>
                </div>
            </div>
        </div>

        <!-- Slide 14: CTA -->
        <div id="slide-14" class="slide">
             <div class="text-center animated-module">
                <button onclick="showFullDashboard()" class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-8 rounded-full transition-all transform hover:scale-105 text-lg">
                    Explora los datos
                </button>
            </div>
        </div>
    </div>

    <div id="full-dashboard-container" class="max-w-7xl mx-auto relative z-10 pt-12 pb-12" style="display: none;">
        <!-- Header -->
        <header class="text-center mb-8 px-4">
            <h1 class="text-3xl md:text-4xl font-bold main-title">Dashboard de Encuesta de Mercado</h1>
            <p class="text-slate-400 mt-2 text-lg">Validación del Modelo de Negocio "Ama de Llaves" (Muestra: 238 Personas)</p>
        </header>

        <!-- KPIs Principales -->
        <section class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8 px-4">
            <div class="kpi-card p-6 flex flex-col items-center justify-center text-center">
                <h3 class="text-lg font-semibold text-slate-300">Principal Preocupación</h3>
                <p class="text-2xl md:text-3xl font-bold kpi-value mt-2">Confianza</p>
                <p class="text-slate-400 text-sm mt-1">(50% de los encuestados)</p>
            </div>
            <div class="kpi-card p-6 flex flex-col items-center justify-center text-center">
                <h3 class="text-lg font-semibold text-slate-300">Importancia de Certificación</h3>
                <p class="text-2xl md:text-3xl font-bold kpi-value mt-2">7.8 / 10</p>
                <p class="text-slate-400 text-sm mt-1">(Calificación Promedio)</p>
            </div>
            <div class="kpi-card p-6 flex flex-col items-center justify-center text-center">
                <h3 class="text-lg font-semibold text-slate-300">Probabilidad de Uso</h3>
                <p class="text-2xl md:text-3xl font-bold kpi-value mt-2">8.2 / 10</p>
                <p class="text-slate-400 text-sm mt-1">(Calificación Promedio)</p>
            </div>
            <div class="kpi-card p-6 flex flex-col items-center justify-center text-center">
                <h3 class="text-lg font-semibold text-slate-300">Pago por Hora Premium</h3>
                <p class="text-2xl md:text-3xl font-bold kpi-value mt-2">70%</p>
                <p class="text-slate-400 text-sm mt-1">(Dispuestos a pagar > $200/hr)</p>
            </div>
        </section>

        <!-- Grid de Gráficas -->
        <main class="grid grid-cols-1 lg:grid-cols-3 gap-6 px-4">
            <div class="chart-card lg:col-span-1 h-[28rem]"><h2 class="chart-title">1. Situación Actual</h2><canvas id="situacionActualChart"></canvas></div>
            <div class="chart-card lg:col-span-2 h-[28rem]"><h2 class="chart-title">2. Principal Preocupación</h2><canvas id="preocupacionChart"></canvas></div>
            <div class="chart-card lg:col-span-3 h-[28rem]"><h2 class="chart-title">3. Factores Importantes</h2><canvas id="factoresChart"></canvas></div>
            <div class="chart-card lg:col-span-2 h-[28rem]"><h2 class="chart-title">4. Importancia de la Certificación</h2><canvas id="certificacionChart"></canvas></div>
            <div class="chart-card lg:col-span-1 h-[28rem]"><h2 class="chart-title">5. Probabilidad de Uso</h2><canvas id="probabilidadChart"></canvas></div>
            <div class="chart-card lg:col-span-2 h-[28rem]"><h2 class="chart-title">6. Disposición a Pagar</h2><canvas id="pagoChart"></canvas></div>
            <div class="chart-card lg:col-span-1 h-[28rem]"><h2 class="chart-title">7. Frecuencia Ideal</h2><canvas id="frecuenciaChart"></canvas></div>
            <div class="chart-card lg:col-span-1 h-[28rem]"><h2 class="chart-title">8. Canal Preferido</h2><canvas id="canalChart"></canvas></div>
            <div class="chart-card lg:col-span-1 h-[28rem]"><h2 class="chart-title">9. Ciudad de Residencia</h2><canvas id="ciudadChart"></canvas></div>
            <div class="chart-card lg:col-span-1 h-[28rem]"><h2 class="chart-title">10. Rango de Edad</h2><canvas id="edadChart"></canvas></div>
            <div class="chart-card lg:col-span-2 h-[28rem]"><h2 class="chart-title">11. Ocupación Principal</h2><canvas id="ocupacionChart"></canvas></div>
            <div class="chart-card lg:col-span-1 h-[28rem]"><h2 class="chart-title">12. Ingreso Mensual</h2><canvas id="ingresoChart"></canvas></div>
        </main>
        
    </div>

    <script>
        let currentSlide = 0;
        const totalSlides = 14;
        let slideChartInstances = {};
        let isNavigating = false;
        const navigationCooldown = 1000; // 1 second cooldown
        let touchStartY = 0;
        const TOTAL_RESPONDENTS = 238;

        const colorPalette = {
            primaryBlue: 'rgba(59, 130, 246, 0.85)',
            accentCyan: 'rgba(34, 211, 238, 0.85)',
            accentGreen: 'rgba(74, 222, 128, 0.85)',
            accentIndigo: 'rgba(129, 140, 248, 0.85)',
            accentGray: 'rgba(156, 163, 175, 0.85)',
            accentOrange: 'rgba(251, 146, 60, 0.85)'
        };
        const simulatedData = {
            situacion: { labels: ['Interesado', 'Ocasional', 'No interesado', 'Regular'], data: [107, 71, 36, 24] },
            preocupacion: { labels: ['Confianza y seguridad', 'Puntualidad', 'Calidad y consistencia', 'Precio del servicio', 'Disponibilidad'], data: [119, 70, 30, 10, 9] },
            factores: { labels: ['Seguro o respaldo legal', 'Verificación de antecedentes', 'Garantía de alta calidad', 'Facilidad para agendar', 'Precio competitivo'], data: [210, 202, 190, 143, 119] },
            certificacion: { labels: ['10', '9', '8', '7', '6', '5'], data: [40, 25, 50, 110, 8, 5] },
            probabilidad: { labels: ['10', '9', '8', '7', '6', '5'], data: [40, 30, 80, 70, 10, 8] },
            pago: { labels: ['Entre $201 y $300', 'Entre $301 y $400', 'Entre $150 y $200', 'Entre $401 y $500', 'Más de $500'], data: [83, 71, 36, 36, 12] },
            frecuencia: { labels: ['Quincenalmente', 'Mensualmente', 'Semanalmente', '2-3/semana'], data: [95, 60, 48, 35] },
            canal: { labels: ['App Móvil', 'WhatsApp', 'Sitio Web', 'Llamada'], data: [107, 70, 40, 21] },
            ciudad: { labels: ['Mérida', 'San Fco. de Campeche'], data: [155, 83] },
            edad: { labels: ['25 - 34', '35 - 44', '45 - 55', '> 55'], data: [95, 83, 48, 12] },
            ocupacion: { labels: ['Oficina', 'Independiente', 'Empresario/a', 'Otro'], data: [83, 71, 48, 36] },
            ingreso: { labels: ['$15k - $25k', '<$15k', '$25k - $40k', '>$40k'], data: [95, 65, 48, 30] }
        };
        
        // --- Dark Mode Chart Config ---
        const tickColor = 'rgba(255, 255, 255, 0.3)';
        const gridColor = 'rgba(255, 255, 255, 0.1)';
        const fontConfig = { family: "'Inter', sans-serif", weight: '400' };
        const legendFontConfig = { family: "'Inter', sans-serif", weight: '400', size: 11 };

        Chart.defaults.color = 'rgba(255, 255, 255, 0.7)';
        Chart.defaults.font.family = fontConfig.family;

        const defaultChartOptions = {
            responsive: true, maintainAspectRatio: false,
            layout: {
                padding: {
                    bottom: 20 
                }
            },
            plugins: { 
                legend: { 
                    position: 'bottom', 
                    labels: { 
                        padding: 15,
                        boxWidth: 12,
                        font: legendFontConfig
                    } 
                },
                tooltip: {
                    callbacks: {
                        label: function(context) {
                            const value = context.raw;
                            const percentage = ((value / TOTAL_RESPONDENTS) * 100).toFixed(1);
                            
                            if (context.chart.canvas.id.includes('factoresChart')) {
                                return `${context.label}: ${value} selecciones (${percentage}% de encuestados)`;
                            }
                            
                            const label = context.dataset.label || context.label || '';
                            return `${label}: ${value} (${percentage}%)`;
                        }
                    }
                } 
            },
            scales: {
                y: { beginAtZero: true, grid: { color: gridColor }, ticks: { color: tickColor, font: fontConfig } },
                x: { 
                    grid: { display: false }, 
                    ticks: { 
                        color: tickColor, 
                        font: fontConfig, 
                        autoSkip: false,
                        maxRotation: 0,
                        minRotation: 0,
                        callback: function(value) {
                            const label = this.getLabelForValue(value);
                            if (typeof label === 'string' && label.length > 20) {
                                return label.split(' ');
                            }
                            return label;
                        }
                    } 
                }
            }
        };
        const horizontalBarOptions = { ...defaultChartOptions, indexAxis: 'y' };
        const doughnutOptions = { ...defaultChartOptions, scales: { x: { display: false }, y: { display: false } } };

        function showSlide(slideIndex) {
            const slides = document.querySelectorAll('.slide');
            slides.forEach(slide => slide.classList.remove('active'));
            
            const currentSlideElement = document.getElementById(`slide-${slideIndex}`);
            if (currentSlideElement) {
                currentSlideElement.classList.add('active');
                 setTimeout(() => {
                    createChartsForSlide(slideIndex);
                }, 50); // Small delay to ensure animations trigger
            }
             // Handle background gradient transition
            const gradients = document.querySelectorAll('.background-gradient');
            gradients.forEach(grad => grad.style.opacity = '0');
            const activeGradientIndex = slideIndex % gradients.length;
            gradients[activeGradientIndex].style.opacity = '1';
        }

        function nextSlide() {
            if (isNavigating || currentSlide >= totalSlides) return;
            isNavigating = true;

            currentSlide++;
            showSlide(currentSlide);

            setTimeout(() => { isNavigating = false; }, navigationCooldown);
        }

        function prevSlide() {
            if (isNavigating || currentSlide <= 0) return;
            isNavigating = true;
            
            currentSlide--;
            showSlide(currentSlide);

            setTimeout(() => { isNavigating = false; }, navigationCooldown);
        }

        function showFullDashboard() {
            document.getElementById('presentation-container').style.display = 'none';
            document.body.classList.remove('presentation-mode');
            document.getElementById('full-dashboard-container').style.display = 'block';
            renderAllCharts();
        }

        function createAndStoreChart(canvasId, type, data, options) {
            const ctx = document.getElementById(canvasId);
            if(slideChartInstances[canvasId]) {
                slideChartInstances[canvasId].destroy();
            }
            if (ctx) {
                slideChartInstances[canvasId] = new Chart(ctx, { type, data, options });
            }
        }

        function createChartsForSlide(slideIndex) {
            switch (slideIndex) {
                case 6:
                    createAndStoreChart('preocupacionChart_slide', 'bar', { labels: simulatedData.preocupacion.labels, datasets: [{ label: 'Encuestados', data: simulatedData.preocupacion.data, backgroundColor: colorPalette.primaryBlue }] }, { ...horizontalBarOptions, plugins: { legend: { display: false } } });
                    break;
                case 7:
                    createAndStoreChart('factoresChart_slide', 'bar', { labels: simulatedData.factores.labels, datasets: [{ label: 'Selecciones', data: simulatedData.factores.data, backgroundColor: colorPalette.accentGreen }] }, { ...defaultChartOptions, plugins: { legend: { display: false } } });
                    break;
                case 8:
                    createAndStoreChart('certificacionChart_slide', 'bar', { labels: simulatedData.certificacion.labels, datasets: [{ label: 'Respuestas', data: simulatedData.certificacion.data, backgroundColor: colorPalette.primaryBlue }] }, { ...defaultChartOptions, plugins: { legend: { display: false } } });
                    break;
                case 9:
                    createAndStoreChart('probabilidadChart_slide', 'bar', { labels: simulatedData.probabilidad.labels, datasets: [{ label: 'Respuestas', data: simulatedData.probabilidad.data, backgroundColor: colorPalette.accentIndigo }] }, { ...defaultChartOptions, plugins: { legend: { display: false } } });
                    break;
                case 10:
                    createAndStoreChart('pagoChart_slide', 'bar', { labels: simulatedData.pago.labels, datasets: [{ label: 'Encuestados', data: simulatedData.pago.data, backgroundColor: colorPalette.accentOrange }] }, { ...defaultChartOptions, plugins: { legend: { display: false } } });
                    break;
                case 11:
                     createAndStoreChart('edadChart_slide', 'bar', { labels: simulatedData.edad.labels, datasets: [{ label: 'Encuestados', data: simulatedData.edad.data, backgroundColor: colorPalette.accentIndigo }] }, { ...defaultChartOptions, plugins: { legend: { display: false } } });
                    createAndStoreChart('ingresoChart_slide', 'bar', { labels: simulatedData.ingreso.labels, datasets: [{ label: 'Encuestados', data: simulatedData.ingreso.data, backgroundColor: colorPalette.primaryBlue }] }, { ...horizontalBarOptions, plugins: { legend: { display: false } } });
                    break;
            }
        }
        
        document.addEventListener('DOMContentLoaded', () => {
            showSlide(currentSlide);
        
            window.addEventListener('wheel', (event) => {
                if (document.body.classList.contains('presentation-mode')) {
                    // event.preventDefault(); // This can be too aggressive
                    if (event.deltaY > 0) {
                        nextSlide();
                    } else {
                        prevSlide();
                    }
                }
            }, { passive: true }); // Use passive for better scroll performance on some devices

            window.addEventListener('keydown', (event) => {
                if (document.body.classList.contains('presentation-mode')) {
                    if (event.key === 'ArrowDown' || event.key === 'ArrowRight') {
                        nextSlide();
                    } else if (event.key === 'ArrowUp' || event.key === 'ArrowLeft') {
                        prevSlide();
                    }
                }
            });

            window.addEventListener('touchstart', (e) => { touchStartY = e.changedTouches[0].screenY; }, { passive: true });
            window.addEventListener('touchend', (e) => {
                let touchEndY = e.changedTouches[0].screenY;
                if (document.body.classList.contains('presentation-mode')) {
                    if (touchStartY - touchEndY > 50) { // Swipe Up
                        nextSlide();
                    } else if (touchEndY - touchStartY > 50) { // Swipe Down
                        prevSlide();
                    }
                }
            }, { passive: true });
        });
        
        function renderAllCharts() {
            function createChart(canvasId, type, data, options) {
                const ctx = document.getElementById(canvasId);
                if (Chart.getChart(ctx)) { Chart.getChart(ctx).destroy(); }
                if (ctx) new Chart(ctx, { type, data, options });
            }

            createChart('situacionActualChart', 'doughnut', { labels: simulatedData.situacion.labels, datasets: [{ data: simulatedData.situacion.data, backgroundColor: [colorPalette.primaryBlue, colorPalette.accentCyan, colorPalette.accentGray, colorPalette.accentGreen], borderColor: '#0d1117', borderWidth: 5 }] }, doughnutOptions);
            createChart('preocupacionChart', 'bar', { labels: simulatedData.preocupacion.labels, datasets: [{ label: 'Encuestados', data: simulatedData.preocupacion.data, backgroundColor: colorPalette.primaryBlue }] }, { ...horizontalBarOptions, plugins: {legend: {display: false}} });
            createChart('factoresChart', 'bar', { labels: simulatedData.factores.labels, datasets: [{ label: 'Selecciones', data: simulatedData.factores.data, backgroundColor: colorPalette.accentGreen }] }, { ...defaultChartOptions, plugins: { legend: { display: false } } });
            createChart('certificacionChart', 'bar', { labels: simulatedData.certificacion.labels, datasets: [{ label: 'Respuestas', data: simulatedData.certificacion.data, backgroundColor: colorPalette.primaryBlue }] }, { ...defaultChartOptions, plugins: { legend: { display: false } }, scales: {x: {title: {display: true, text:'Calificación'}}, y:{title: {display:true, text: 'Nº de Encuestados'}}} });
            createChart('probabilidadChart', 'bar', { labels: simulatedData.probabilidad.labels, datasets: [{ label: 'Respuestas', data: simulatedData.probabilidad.data, backgroundColor: colorPalette.accentIndigo }] }, { ...horizontalBarOptions, plugins: { legend: { display: false } }, scales: {x: {title: {display: true, text:'Nº de Encuestados'}}, y:{title: {display:true, text: 'Calificación'}}} });
            createChart('pagoChart', 'bar', { labels: simulatedData.pago.labels, datasets: [{ label: 'Encuestados', data: simulatedData.pago.data, backgroundColor: colorPalette.accentOrange }] }, { ...defaultChartOptions, plugins: { legend: { display: false } } });
            createChart('canalChart', 'pie', { labels: simulatedData.canal.labels, datasets: [{ data: simulatedData.canal.data, backgroundColor: [colorPalette.primaryBlue, colorPalette.accentCyan, colorPalette.accentIndigo, colorPalette.accentGray], borderColor: '#0d1117', borderWidth: 5 }] }, doughnutOptions);
            createChart('frecuenciaChart', 'bar', { labels: simulatedData.frecuencia.labels, datasets: [{ label: 'Encuestados', data: simulatedData.frecuencia.data, backgroundColor: colorPalette.accentGreen }] }, { ...horizontalBarOptions, plugins: { legend: { display: false } } });
            createChart('edadChart', 'bar', { labels: simulatedData.edad.labels, datasets: [{ label: 'Encuestados', data: simulatedData.edad.data, backgroundColor: colorPalette.accentIndigo }] }, { ...defaultChartOptions, plugins: { legend: { display: false } } });
            createChart('ingresoChart', 'bar', { labels: simulatedData.ingreso.labels, datasets: [{ label: 'Encuestados', data: simulatedData.ingreso.data, backgroundColor: colorPalette.primaryBlue }] }, { ...horizontalBarOptions, plugins: { legend: { display: false } } });
            createChart('ciudadChart', 'doughnut', { labels: simulatedData.ciudad.labels, datasets: [{ data: simulatedData.ciudad.data, backgroundColor: [colorPalette.primaryBlue, colorPalette.accentCyan], borderColor: '#0d1117', borderWidth: 5 }] }, doughnutOptions);
            createChart('ocupacionChart', 'bar', { labels: simulatedData.ocupacion.labels, datasets: [{ label: 'Encuestados', data: simulatedData.ocupacion.data, backgroundColor: colorPalette.accentOrange }] }, { ...defaultChartOptions, plugins: { legend: { display: false } } });
        }
    </script>
</body>
</html>

